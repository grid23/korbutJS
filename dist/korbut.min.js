/* Copyright Â©2014 Benjamin Moulin <hello@grid23.net>
   This work is free. You can redistribute it and/or modify it under the 
   terms of the Do What The Fuck You Want To Public License, Version 2, 
   as published by Sam Hocevar. See the COPYING file for more details. 
*/

!function a(b,c,d){function e(f,h){var i,j;if(!c[f]){if(!b[f]){if(i="function"==typeof require&&require,!h&&i)return i(f,!0);if(g)return g(f,!0);throw new Error("Cannot find module '"+f+"'")}j=c[f]={exports:{}},b[f][0].call(j.exports,function(a){var c=b[f][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[f].exports}var f,g="function"==typeof require&&require;for(f=0;f<d.length;f++)e(d[f]);return e}({1:[function(a,b){void function(){"use strict";{var c=(a("./utils"),a("./class").class);a("./Stylesheet").Stylesheet}b.exports.Animation=c(function(){return{constructor:function(){}}})}()},{"./Stylesheet":13,"./class":18,"./utils":21}],2:[function(a,b){void function(){"use strict";var c=(a("./utils"),a("./class").class);b.exports.Matrix=c(function(){return{constructor:function(){}}}),b.exports.ClientRect=c(function(){return{constructor:function(){}}})}()},{"./class":18,"./utils":21}],3:[function(a,b){void function(){"use strict";var c=(a("./utils"),a("./class").class),d=a("./Model").Model;b.exports.Cookie=c(d,function(){return{constructor:function(){}}})}()},{"./Model":7,"./class":18,"./utils":21}],4:[function(a,b){void function(){"use strict";var c=(a("./utils"),a("./class").class);b.exports.CustomEvent=c(function(){return{constructor:function(){}}})}()},{"./class":18,"./utils":21}],5:[function(a,b){void function(){"use strict";var c=a("./utils"),d=a("./class").class;b.exports.Event=d(function(){return{constructor:function(a,b){a="string"==c.typeof(a)?a:function(){throw new Error("Event.type")}(),b=function(a){return 1==a.length&&_typeof(a[0])==Object&&a[0].hasOwnProperty("detail")?Object.create(a[0]):null}(c.spread(arguments,1)),this.type=a,this.detail=b,this.timestamp=Date.now()},initEvent:{value:function(){return this.constructor.apply(this,arguments)}},type:{enumerable:!0,get:function(){return this._type},set:function(a){!this._type&&Object.defineProperty(this,"_type",{value:a})}},detail:{enumerable:!0,get:function(){return this._detail},set:function(a){void 0===this._detail&&Object.defineProperty(this,"_detail",{value:a})}},timestamp:{enumerable:!0,get:function(){return this._timestamp},set:function(a){!this._timestamp&&Object.defineProperty(this,"_timestamp",{value:a})}}}}),b.exports.EventTarget=d(function(a){return Object.defineProperties(a,{isEventListener:{enumerable:!0,value:function(a){return a&&("function"==typeof a||"function"==typeof a.handleEvent)}}}),{addEventListener:{enumerable:!0,value:function(b,d,e){return!this._events&&Object.defineProperty(this,"_events",{value:Object.create(null)}),1==arguments.length&&arguments[0]&&c.typeof(arguments[0])==Object?function(a,b,c,d){c=0;for(d in b)b.hasOwnProperty(d)&&(c+=a.addEventListener(d,b[d]));return c}(this,arguments[0]):(b="string"==c.typeof(b)?b:null,d=a.isEventListener(d)?d:null,e=this._events[b],b&&d?(Array.isArray(e)?e.push(d):e&&e!==Object.prototype[b]?a.isEventListener(e)&&(this._events[b]=[e,d]):this._events[b]=d,1):0)}},removeEventListener:{enumerable:!0,value:function(b,d,e){return!this._events&&Object.defineProperty(this,"_events",{value:Object.create(null)}),1==arguments.length&&arguments[0]&&c.typeof(arguments[0])==Object?function(a,b,c,d){c=0;for(d in b)b.hasOwnProperty(d)&&(c+=a.removeEventListener(d,b[d]));return c}(this,arguments[0]):(b="string"==c.typeof(b)?b:null,d=a.isEventListener(b)||"*"==b?b:null,e=this._events[b],b&&d&&e?e===d?(delete this._events[b],1):Array.isArray(e)?function(a,c,f,g){if("*"===d)return g=e.length,delete a._events[b],g;for(g=0;f=c.indexOf(d)>-1;)c.splice(f,1),g++;return a._events[b]=c,0==a._events[b].length&&delete a._events[b],g}(this,[].concat(e)):void 0:0)}},listeners:{enumerable:!0,value:function(a,b){a=c.spread(arguments),b="function"==typeof a[a.length-1]?a.pop():null,void function(b,d,e){for(;e>d;d++)a[d]=function(a){return"string"!=c.typeof(a)?void 0:Object.create(null,{add:{enumerable:!0,value:function(c){b.addEventListener(a,c)}},remove:{enumerable:!0,value:function(c){b.removeEventListener(a,c)}}})}(a[d])}(this,0,a.length),b&&b.apply(null,a)}},dispatchEvent:{enumerable:!0,value:function(a,c,d){if(a=b.exports.Event.isImplementedBy(a)?a:b.exports.Event.create.apply(null,arguments),c=(this._events||{})[a.type],d=0,"error"==a.type&&!c)throw b.exports.Event.isImplementedBy(a.detail)?a.detail:new Error;return c&&("function"==typeof c?(c.call(null,a),d++):Array.isArray(c)?void function(b){for(;b.length;)"function"==typeof b[0]?(b.shift().call(null,a),d++):"function"==typeof b[0].handleEvent?(b.shift().handleEvent.call(b,a),d++):b.shift()}([].concat(c)):"function"==typeof c.handleEvent&&(c.handleEvent.call(c,a),d++)),d}},uid:{enumerable:!0,configurable:!0,get:function(){return this._uid||(this._uid=UID.uid()),this._uid}}}})}()},{"./class":18,"./utils":21}],6:[function(a,b){void function(){"use strict";var c=a("./class").class;b.exports.Iterator=c(function(a){return Object.defineProperties(a,{iterable:{enumerable:!0,value:function(a){try{return Object.keys(a),!0}catch(b){return a.hasOwnProperty("length")}return!1}},iterate:{enumerable:!0,value:function(a,b,c,d,e,f){a=a||Object.create(null);try{return Object.keys(a)}catch(g){if(b=[],"[object String]"==Object.prototype.toString.call(a))for(c=0,d=a.length;d>c;c++)e=a.charCodeAt(c),f=a.charCodeAt(d-1>c?c+1:""),b.push(e>=55296&&56319>=e&&f>=56320&&57343>=f?a[c]+a[++c]:a[c]);return b}}}}),{constructor:function(b,c,d,e,f){for(c=!!arguments[1]||"[object String]"==Object.prototype.toString.call(arguments[0]),d=a.iterate(b),e=0,f=d.length,Object.defineProperties(this,{_pointer:{writable:!0,value:-1},_range:{value:[]}});f>e;e++)this._range[e]=c?[d[e]]:[d[e],arguments[0][d[e]]]},next:{enumerable:!0,value:function(a,b){return a="function"==typeof a?a:null,b=++this._pointer,Object.defineProperty(this,"_current",{configurable:!0,value:b>=(this._range||[]).length?{index:null,key:null,value:null,done:!0}:{index:b,key:this._range[b][0],value:this._range[b][this._range[b].length-1],done:!1}}),a&&a(this.current.done,this.current.key,this.current.value),this.current}},range:{enumerable:!0,get:function(){return this._range?[].concat(this._range):[]}},pointer:{enumerable:!0,get:function(){return this._pointer||-1},set:function(a){this._pointer=this._pointer||Object.defineProperty(this,"_pointer",{value:-1})._pointer,this._pointer=a}},length:{enumerable:!0,value:function(){return this._range.length}},current:{enumerable:!0,get:function(){return this._current||this.next(),this._current}}}})}()},{"./class":18}],7:[function(a,b){void function(){"use strict";var c=a("./utils"),d=a("./class").class,e=a("./EventTarget").EventTarget,f=a("./EventTarget").Event,g=a("./Iterator").Iterator,h=a("./UID").UID,i=a("./Serializer").Serializer;b.exports.Collection=d(e,function(a){return Object.defineProperties(a,{Serializer:{enumerable:!0,value:d(i,{_delimiter:":",_separator:"|"})}}),{constructor:function(){},addModel:{enumerable:!0,value:function(){}},removeModel:{enumerable:!0,value:function(){}},find:{enumerable:!0,value:function(){}},subset:{enumerable:!0,value:function(){}},serialize:{enumerable:!0,value:function(){}},Serializer:{enumerable:!0,get:function(){return this._Serializer||b.exports.Collection.Serializer},set:function(a){!this._Serializer&&Object.defineProperty(this,"_Serializer",{value:a})}}}}),b.exports.RemoveDataEvent=d(f,{constructor:function(a,b,c){f.call(this,"remove"),this.model=a,this.key=b,this.from=c,this.to=void 0},model:{enumerable:!0,get:function(){return this._model},set:function(a){!this._model&&Object.defineProperty(this,"_model",{value:a})}},key:{enumerable:!0,get:function(){return this._key},set:function(a){!this._key&&Object.defineProperty(this,"_key",{value:a})}},from:{enumerable:!0,get:function(){return this._from},set:function(a){!this._from&&Object.defineProperty(this,"_from",{value:a})}},to:{enumerable:!0,get:function(){return this._to},set:function(a){!this._to&&Object.defineProperty(this,"to",{value:a})}}}),b.exports.AddDataEvent=d(f,{constructor:function(a,b,c,d){f.call(this,"add"),this.model=a,this.key=b,this.from=d,this.to=c},model:{enumerable:!0,get:function(){return this._model},set:function(a){!this._model&&Object.defineProperty(this,"_model",{value:a})}},key:{enumerable:!0,get:function(){return this._key},set:function(a){!this._key&&Object.defineProperty(this,"_key",{value:a})}},from:{enumerable:!0,get:function(){return this._from},set:function(a){!this._from&&Object.defineProperty(this,"_from",{value:a})}},to:{enumerable:!0,get:function(){return this._to},set:function(a){!this._to&&Object.defineProperty(this,"to",{value:a})}}}),b.exports.ChangeDataEvent=d(f,{constructor:function(a,b,c,d){f.call(this,"change"),this.model=a,this.key=b,this.from=d,this.to=c},model:{enumerable:!0,get:function(){return this._model},set:function(a){!this._model&&Object.defineProperty(this,"_model",{value:a})}},key:{enumerable:!0,get:function(){return this._key},set:function(a){!this._key&&Object.defineProperty(this,"_key",{value:a})}},from:{enumerable:!0,get:function(){return this._from},set:function(a){!this._from&&Object.defineProperty(this,"_from",{value:a})}},to:{enumerable:!0,get:function(){return this._to},set:function(a){!this._to&&Object.defineProperty(this,"to",{value:a})}}}),b.exports.UpdateDataEvent=d(f,{constructor:function(a,b){f.call(this,"update"),this.model=a,this.keys=[].concat(b)},model:{enumerable:!0,get:function(){return this._model},set:function(a){!this._model&&Object.defineProperty(this,"_model",{value:a})}},key:{enumerable:!0,get:function(){return this._key},set:function(a){!this._key&&Object.defineProperty(this,"_keys",{value:a})}}}),b.exports.Model=d(e,function(a,d){function e(a,c){d[a.uid]&&-1==d[a.uid].updating.keys.indexOf(c)&&(d[a.uid].updating.keys.push(c),clearTimeout(d[a.uid].updating.timer),d[a.uid].updating.timer=setTimeout(function(){a.dispatchEvent(new b.exports.UpdateDataEvent(a,d[a.uid].updating.keys.splice(0,d[a.uid].updating.keys.length)))},4))}return d=Object.create(null),Object.defineProperties(a,{Serializer:{enumerable:!0,value:i},getModelByUid:{enumerable:!0,value:function(a){return d[a]?d[a].instance:null}}}),{constructor:function(a){Object.defineProperty(this,"_uid",{value:h.uid()}),(a=1==arguments.length&&"object"==c.typeof(a)?a:null)&&this.setItem(a),d[this.uid]={instance:this,updating:{keys:[],timer:null}}},setItem:{enumerable:!0,value:function(a,d,f,h,i,j,k){return 1==arguments.length&&"object"==c.typeof(arguments[0])?function(a){for(;a.next(),!a.current.done;)this.setItem(a.current.key,a.current.value)}.call(this,new g(arguments[0])):(a="string"==c.typeof(a)?a:Object.prototype.toString.call(a),d=function(a){if("function"==typeof a)for(;"function"==typeof a;)a=a.call(this);return a}.call(this,d),h=this.hooks.hasOwnProperty(a)?this.hooks[a]:null,f=this.data.hasOwnProperty(a)?this.data[a]:void 0,"function"==typeof h&&(d=h.call(this,d,f)),"object"==c.typeof(d)?function(a){for(;a.next(),!a.current.done;)this.setItem(a.current.key,a.current.value)}.call(this,new g(d)):("array"==c.typeof(d)&&(d=[].concat(d)),void 0==d&&this.data.hasOwnProperty(a)?(k=!0,delete this.data[a]):(this.data.hasOwnProperty(a)||(i=!0),this.data[a]=d),d!==f&&(j=!0),k&&this.dispatchEvent(new b.exports.RemoveDataEvent(this,a,f)),i&&this.dispatchEvent(new b.exports.AddDataEvent(this,a,d,f)),void(j&&(this.dispatchEvent(new b.exports.ChangeDataEvent(this,a,d,f)),e(this,a)))))}},getItem:{enumerable:!0,value:function(a,b,d){for(a=1==arguments.length?[a]:arguments.length>1?c.spread(arguments):[],b=[],d=new g(a);d.next(),!d.current.done;)b.push(this.data.hasOwnProperty(d.current.value)?this.data[d.current.value]:void 0);return b.length>1?b:b[0]}},removeItem:{enumerable:!0,value:function(a){return this.setItem(a,void 0)}},data:{enumerable:!0,get:function(){return this._data?this._data:Object.defineProperty(this,"_data",{value:Object.create(this.constructor.prototype._data||{})})._data}},hooks:{enumerable:!0,get:function(){return this._hooks?this._hooks:Object.defineProperty(this,"_hooks",{value:Object.create(this.constructor.prototype._hooks||{})})._hooks}},serialize:{enumerable:!0,value:function(a){return i.isImplementedBy(a)?a.serialize(this.data):this.serializer.serialize(this.data)}},uid:{enumerable:!0,configurable:!0,get:function(){return this._uid?this._uid:Object.defineProperty(this,"_uid",{value:h.uid()})}},serializer:{enumerable:!0,get:function(){return this._serializer?this._serializer:Object.defineProperty(this,"_serializer",{value:b.exports.Model.Serializer})._serializer}},Serializer:{enumerable:!0,configurable:!0,get:function(){return this._serializer.constructor}}}})}()},{"./EventTarget":5,"./Iterator":6,"./Serializer":11,"./UID":15,"./class":18,"./utils":21}],8:[function(a,b){void function(){"use strict";var c=(a("./utils"),a("./class").class);b.exports.PointerEvent=c(function(){return{constructor:function(){}}})}()},{"./class":18,"./utils":21}],9:[function(a,b){void function(){"use strict";var c=(a("./utils"),a("./class").class),d=a("./Iterator").Iterator;b.exports.Promise=c(function(a){return Object.defineProperties(a,{all:{enumerable:!0,value:function(){if(!d.iterable(promises))throw new TypeError("korbut.Promise.race requires an iterable object as argument 0.");return new b.exports.Promise(function(a,c,e,f,g){function h(b){return function(c){g[b]=c,--f||a(g)}}function i(a){c(a)}for(e=new d(promises),f=promises.length(),g=[];!e.next().done;)void function(a,c){c=a.value,b.exports.Promise.isImplementedBy(c)||(c=b.exports.Promise.cast(c)),c.then(h(a.index),i)}(e.current)})}},cast:{enumerable:!0,value:function(a){return new b.exports.Promise(function(b){b(a)})}},race:{enumerable:!0,value:function(a){if(!d.iterable(a))throw new TypeError("korbut.Promise.race requires an iterable object as argument 0.");return new b.exports.Promise(function(c,e,f,g){function h(a){g||(g=!0,c(a))}function i(){--f||e(new Error("all promises were rejected"))}for(iterator=new d(a),f=iterator.length();!iterator.next().done;)b.exports.Promise.isImplementedBy(iterator.current.value)&&iterator.current.value.then(h,i)})}},reject:{enumerable:!0,value:function(a){return new b.exports.Promise(function(b,c){c(a)})}},resolve:{enumerable:!0,value:function(a){return new b.exports.Promise(function(b){b(a)})}}}),{constructor:function(a,b){function c(a,e){for(c=d=function(){},b.key="resolved",b.value=a,Object.freeze(b),e=Array.isArray(this._onresolve)?[].concat(this._onresolve):[];e.length;)e.shift().call(null,a)}function d(a,e){for(c=d=function(){},b.key="rejected",b.value=a,Object.freeze(b),e=Array.isArray(this._onreject)?[].concat(this._onreject):[];e.length;)e.shift().call(null,a)}if("function"!=typeof a)throw new TypeError("Constructor korbut.Promise requires a resolver function as argument 0.");b={key:"pending",value:null},Object.defineProperty(this,"_state",{get:function(){return b}}),a(c.bind(this),d.bind(this))},then:{enumerable:!0,value:function(a,c){return function(d,e,f){return e||f?e?new b.exports.Promise(function(b,c,e){try{e="function"==typeof a?a(d._state.value):null}catch(f){return void c(f)}e&&"function"==typeof e.then?e.then(function(a){b(a)},function(a){c(a)}):b(e)}):f?new b.exports.Promise(function(a,b,e){try{e="function"==typeof c?c(d._state.value):null}catch(f){return void b(f)}e&&"function"==typeof e.then?e.then(function(b){a(b)},function(a){b(a)}):a(e)}):void 0:new b.exports.Promise(function(b,e){!Array.isArray(d._onresolve)&&Object.defineProperty(d,"_onresolve",{value:[]}),!Array.isArray(d._onreject)&&Object.defineProperty(d,"_onreject",{value:[]}),d._onresolve.push(function(c,d){try{d=a(c)}catch(f){return void e(f)}d&&"function"==typeof d.then?d.then(function(a){b(a)},function(a){e(a)}):b(d)}),d._onreject.push(function(a,d){try{d=c(a)}catch(f){return void e(f)}d&&"function"==typeof d.then?d.then(function(a){b(a)},function(a){e(a)}):b(d)})})}(this,"resolved"==this._state.key,"rejected"==this._state.key)}},"catch":{enumerable:!0,value:function(a){return function(c){return new b.exports.Promise(function(b,d){c.then(b,function(b){return d(b),a(b)})})}(this)}},state:{enumerable:!0,configurable:!0,get:function(){return(this._state||{}).key}}}})}()},{"./Iterator":6,"./class":18,"./utils":21}],10:[function(a,b){void function(){"use strict";var c=a("./utils"),d=a("./class").class,e=a("./Iterator").Iterator,f=a("./UID").UID;b.exports.Route=d(function(){return{constructor:function(a,b){a="string"==c.typeof(a)?a:function(){throw new Error("Route.path")}(),b=function(a){return!a.length||1==a.length&&-1!="undefined, null".indexOf(c.typeof(a[0]))?null:1==a.length&&c.typeof(a[0])==Object&&a[0].hasOwnProperty("detail")?a[0].detail:1==a.length?a[0]:a}(c.spread(arguments,1)),Object.defineProperties(this,{_path:{value:a},_detail:{value:Object.create(b)},_timestamp:{value:Date.now()},_matches:{value:{}}})},path:{enumerable:!0,get:function(){return this._path}},timestamp:{enumerable:!0,get:function(){return this._timestamp||0}},detail:{enumerable:!0,get:function(){return this._detail}},matches:{enumerable:!0,get:function(){return this._matches}}}}),b.exports.Router=d(function(a){return Object.defineProperties(a,{dispatcher:{enumerable:!0,value:function(a){function b(b,c,d,e){if(!a[b])if(-1==b.indexOf(":"))a[b]=new RegExp(b);else{for(d=[],c=[],e=b.split("/");e.length;)void function(a){":"===a[0]?(d.push(a.slice(1)),c.push("([^\\/]*)")):c.push(a)}(e.shift());a[b]=new RegExp(c.join("\\/")),a[b].assignments=d}return a[b]}return function(a,c,d,e){return d=b(a.path),e=c.match(d),e?1==e.length?!0:function(b,c){for(;c>b;b++)a._matches[d.assignments[b]]=e[b+1]}(0,d.assignments.length):!1}}(Object.create(null))},isRouteHandler:{enumerable:!0,value:function(a){return a&&("function"==typeof a||"function"==typeof a.handleRoute)}}}),{constructor:function(a){"function"==typeof a&&a.call(this,function(a){return function(){return a.dispatch.apply(a,arguments)}}(this))},addRouteHandler:{enumerable:!0,value:function(b,d,e){return!this._routes&&Object.defineProperty(this,"_routes",{value:Object.create(null)}),1==arguments.length&&arguments[0]&&c.typeof(arguments[0])==Object?function(a,b,c,d){c=0;for(d in b)b.hasOwnProperty(d)&&(c+=this.addRouteHandler(d,b[d]));return c}(this,arguments[0]):(b="string"==c.typeof(b)?b:null,d=a.isRouteHandler(d)?d:null,e=this._routes[b],b&&d?(Array.isArray(e)?e.push(d):e&&e!==Object.prototype[b]?a.isRouteHandler(e)&&(this._routes[b]=[e,d]):this._routes[b]=d,1):0)}},removeRouteHandler:{enumerable:!0,value:function(b,d){return!this._routes&&Object.defineProperty(this,"_routes",{value:Object.create(null)}),1==arguments.length&&arguments[0]&&c.typeof(arguments[0])==Object?function(a,b,c,d){c=0;for(d in b)b.hasOwnProperty(d)&&(c+=this.removeRouteHandler(d,b[d]));return c}(this,arguments[0]):(b="string"==c.typeof(b)?b:null,d=a.isRouteHandler(b)||"*"==b?b:null,handlers=this.routes[b],b&&d&&handlers?handlers===d?(delete this._routes[b],1):Array.isArray(handlers)?function(a,c,e,f){if("*"===d)return f=handlers.length,delete a._routes[b],f;for(f=0;e=c.indexOf(d)>-1;)c.splice(e,1),f++;return a._routes[b]=c,0==a._routes[b].length&&delete a._routes[b],f}(this,[].concat(handlers)):void 0:0)}},dispatchRoute:{enumerable:!0,value:function(d,f){return d=b.exports.Route.isImplementedBy(d)?d:b.exports.Route.create.apply(null,arguments),f=function(a,b,c){for(c=Object.keys(a).sort();c.length;)b[c[0]]=a[c.shift()];return new e(b)}(this._routes||Object.create(null),Object.create(null)),function(b,e,g,h){function i(b){return a.isRouteHandler(b.value)?("*"!==b.key&&e++,h=b.value.call(null,d,j,e),"undefined"!==c.typeof(h)?h:e):Array.isArray(b.value)?function(a,f){function f(g){return a.length?(g=a.shift(),"*"!==b.key&&e++,h=g.call(null,d,a.length?f:j,e),"undefined"!==c.typeof(h)?h:e):j()}return f()}([].concat(b.value)):void 0}function j(){return f.next(),1==f.current.done?e:(g="*"===f.current.key?!0:b.dispatcher.call(this,d,f.current.key),g?i(f.current):j())}return e=0,j()}(this)}},handlers:{enumerable:!0,value:function(a,b){a=c.spread(arguments),b="function"==typeof a[a.length-1]?a.pop():null,void function(b,d,e){for(;e>d;d++)a[d]=function(a){return"string"!=c.typeof(a)?void 0:Object.create(null,{add:{enumerable:!0,value:function(c){return b.addRouteHandler(a,c)}},remove:{enumerable:!0,value:function(c){return b.removeRouteHandler(a,c)}}})}(a[d])}(this,0,a.length),b&&b.apply(a)}},dispatcher:{enumerable:!0,get:function(){return this._dispatcher||a.dispatcher}},uid:{enumerable:!0,configurable:!0,get:function(){return this._uid=f.uid(),this._uid}}}})}()},{"./Iterator":6,"./UID":15,"./class":18,"./utils":21}],11:[function(a,b){void function(){"use strict";var c=a("./utils"),d=a("./class").class,e=a("./Iterator").Iterator;b.exports.Serializer=d(function(a){var b="=",d="&",f=/%20/g,g=/\+/g;return Object.defineProperties(a,{serialize:{enumerable:!0,value:function(a,c,g,h,i){for(c=[],g=new e(a),h=this.delimiter||b,i=this.separator||d;!g.next().done;)c.push(escape(g.current.key)+h+encodeURIComponent(g.current.value));return c.join(i).replace(f,"+")}},objectify:{enumerable:!0,value:function(a,c,f,h,i){for(c={},h=this.delimiter||b,i=this.separator||d,f=new e(-1!=a.search(i)?a.split(i):a.length?[str]:[]);!f.next().done;)void function(a,b,d,e){b=a.indexOf(h),d=a.split(h,1),e=a.slice(b+1),c[d]=e}(unescape(f.current.value.replace(g,"%20")));return c}}}),{constructor:function(a){a=a&&c.typeof(a)==Object?a:{},"string"==c.typeof(a.delimiter)&&Object.defineProperty(this,"_delimiter",{value:a.delimiter}),"string"==c.typeof(a.separator)&&Object.defineProperty(this,"_separator",{value:a.separator})},serialize:{enumerable:!0,value:function(b){return a.serialize.call(this,b)}},objectify:{enumerable:!0,value:function(b){return a.objectify.call(this,b)}},delimiter:{enumerable:!0,get:function(){return this._delimiter||b}},separator:{enumerable:!0,get:function(){return this._separator||d}}}})}()},{"./Iterator":6,"./class":18,"./utils":21}],12:[function(a,b){void function(){"use strict";var c=(a("./utils"),a("./class").class);b.exports.Service=c(function(){return{constructor:function(){}}})}()},{"./class":18,"./utils":21}],13:[function(a,b){void function(){"use strict";var c=(a("./utils"),a("./class").class),d=(a("./Iterator").Iterator,a("./EventTarget").EventTarget),e=a("./domReady").domReady;b.exports.CSSRule=c(function(){return{constructor:function(){},property:{enumerable:!0,value:function(){}},priority:{enumerable:!0,value:function(){}}}}),b.exports.Stylesheet=c(d,function(){!function(a,b){try{if(a=new Blob([""],{type:"text/plain"}),b=URL.createObjectURL(a),"msClose"in a)throw new Error}catch(c){return 0}return 1}();return{constructor:function(a,b,c,d,f){function g(){}a=_.spread(arguments),d="function"==_.typeof(a[a.length-1])?a.pop():null,c=Array.isArray(a[a.length-1])?a.pop():null,b="object"==_.typeof(a[a.length-1])?_.invoke(function(){},this,a.pop()):"string"==_.typeof(a[a.length-1])?_.invoke(function(){},this,a.pop(),{}):a[a.args.length-1]instanceof HTMLElement?{node:a.pop()}:{},f={key:"loading",value:null},Object.defineProperty(this,"_state",{get:function(){return f}}),e.then(g.bind(this))},rule:{enumerable:!0,value:function(){}},media:{enumerable:!0,value:function(){}},disable:{enumerable:!0,value:function(){}},enable:{enumerable:!0,value:function(){}},state:{enumerable:!0,configurable:!0,get:function(){return(this._state||{}).key}}}})}()},{"./EventTarget":5,"./Iterator":6,"./class":18,"./domReady":19,"./utils":21}],14:[function(a,b){void function(){"use strict";{var c=(a("./utils"),a("./class").class);a("./Stylesheet").Stylesheet}b.exports.Transition=c(function(){return{constructor:function(){}}})}()},{"./Stylesheet":13,"./class":18,"./utils":21}],15:[function(a,b){void function(){"use strict";var c=a("./utils"),d=a("./class").class;b.exports.UID=d(function(a){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",d="Kxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",e=16,f=/[xy]/g;return Object.defineProperties(a,{uid:{enumerable:!0,value:function(a,g,h,i){return a="string"==c.typeof(this.map)?this.map:d,g="number"==c.typeof(this.radix)?this.radix:e,i="regexp"==c.typeof(this.regexp)?this.regexp:f,h=Date.now(),a.replace(i,function(a,c){return c=(h+Math.random()*g)%g|0,"y"===a&&(c=3&c|8),b[c]})}}}),{constructor:function(a){a=a&&c.typeof(a)==Object?a:{},"string"==c.typeof(a.map)&&Object.defineProperty(this,"_map",{value:a.map}),"number"==c.typeof(a.radix)&&Object.defineProperty(this,"_map",{value:a.number})},generate:{enumerable:!0,value:function(){return a.uid.call(this)}},map:{enumerable:!0,get:function(){return this._map||d}},radix:{enumerable:!0,get:function(){return this._radix||e}}}})}()},{"./class":18,"./utils":21}],16:[function(a,b){void function(){"use strict";var c=a("./utils"),d=a("./class").class,e=a("./Iterator").Iterator,f=a("./Model").Model;b.exports.ZenParser=d(function(a){var d=Element.prototype.hasOwnProperty("classList"),f=Object.create(null,{"+":{enumerable:!0,value:function(a,b){b.context.parentNode.appendChild(b.buffer)}},">":{enumerable:!0,value:function(a,b){b.context.appendChild(b.buffer)}},"^":{enumerable:!0,value:function(a,b,c){b.context=b.context.parentNode||b.context,f["+"](a,b,c)}}}),g=Object.create(null,{"#":{enumerable:!0,value:function(){function a(a,c){a.setAttribute("id",b.exports.ZenParser.escapeHTML(c))}function c(b,c){a(b,c)}return function(a,b){c(b.buffer,b.pile)}}()},".":{enumerable:!0,value:function(){function a(a,c,e){e&&(d?a.classList.remove(b.exports.ZenParser.escapeHTML(e)):a.className.replace(b.exports.ZenParser.escapeHTML(e),"")),d?a.classList.add(b.exports.ZenParser.escapeHTML(c)):a.className+=" "+b.exports.ZenParser.escapeHTML(c)}function c(b,c){a(b,c)}return function(a,b){c(b.buffer,b.pile)}}()},"[":{enumerable:!0,value:function(){function a(a,c,d){a.setAttribute(b.exports.ZenParser.escapeHTML(c),b.exports.ZenParser.escapeHTML(d))}function c(b,c,d,e,f){if(f=c.search("="),1>f)throw new Error("korbut.ZenParser.parse, malformatted attribute substring");d=c.split("=")[0],e=c.slice(f+1),a(b,d,e)}function d(a,b){c(b.buffer,b.pile)}return d.enclosing_glyph="]",d}()},$:{enumerable:!0,value:function(a,b,c){c.vars[b.pile]=c.vars[b.pile]||[],c.vars[b.pile].push(b.buffer)}},"{":{enumerable:!0,value:function(){function a(a,b){a.nodeType===Node.ELEMENT_NODE?a.appendChild(document.createTextNode(b)):a.nodeType===Node.TEXT_NODE&&(a.nodeValue=b)}function b(b,c){a(b,c)}function c(a,c){b(c.buffer,c.pile)}return c.enclosing_glyph="}",c}()},"(":{enumerable:!0,value:function(){function a(a,c,d,f,g){for(f=b.exports.ZenParser.parse(c.pile,c.data),c.buffer=1==f.tree.childNodes.length?f.tree.childNodes[0]:f.tree,g=new e(f.vars);g.next(),!g.current.done;)for(d.vars[g.current.key]=d.vars[g.current.key]||[];g.current.value.length;)d.vars[g.current.key].push(g.current.value.shift())}return a.enclosing_glyph=")",a}()}}),h=function(a,b,c){i(a,b,c),b.traversal?f[b.traversal](a,b,c):b.context=c.tree.appendChild(b.buffer),b.traversal=b.glyph,b.pile="",b.glyph="",b.operator=null,b.buffer&&b.buffer.nodeType===Node.ELEMENT_NODE&&(b.context=b.buffer),b.buffer=null},i=function(a){return a=["A","INPUT","SUBMIT","BUTTON"],function(b,c,d){c.pile=c.pile.trim(),c.operator?g[c.operator](b,c,d):(c.buffer=c.pile.length||"{"!==c.glyph?c.pile.length||"{"===c.glyph?"text"===c.pile?document.createTextNode(""):document.createElement(c.pile):document.createElement("div"):document.createTextNode(""),-1!=a.indexOf(c.buffer.nodeName)&&(c.pile=c.buffer.nodeName.toLowerCase(),g.$(b,c,d))),c.pile="",c.operator=c.glyph}}(),j=function(a,b,d,e,j,k,l){for(e=!1;a.next(),!a.current.done;)b.glyph=a.current.value,e?b.glyph!==l||j?(b.glyph===l?j--:b.glyph===k&&j++,b.pile+=b.glyph):e=!1:f[b.glyph]?h(a,b,d):g[b.glyph]?(i(a,b,d),g[b.glyph].hasOwnProperty("enclosing_glyph")&&(e=!0,j=0,k=b.glyph,l=g[b.glyph].enclosing_glyph)):b.pile+=b.glyph;return h(a,b,d),d.vars.root=c.spread(d.tree.childNodes),d};return Object.defineProperties(a,{parse:{enumerable:!0,value:function(a,c){return new b.exports.ZenParser(a).parse(c)}},escapeHTML:{enumerable:!0,value:function(a){return function(b){return a.nodeValue=b,a.nodeValue}}(document.createTextNode(""))}}),{constructor:function(a){Object.defineProperty(this,"_expression",{value:"string"==c.typeof(a)?a:""})},parse:{enumerable:!0,value:function(a,b,c,d){return b=new e(this.expression),c={data:a,pile:"",glyph:"",buffer:null,operator:null,traversal:null,context:null},d={vars:{},tree:document.createDocumentFragment()},j(b,c,d)}},expression:{enumerable:!0,get:function(){return this._expression||""}}}}),b.exports.View=d(function(a){function d(a,b,c){for(c=new e(b);c.next(),!c.current.done;)void function(b,c,d,e){if(e=b.length)for(;c.next(),!c.current.done;)for(d=0;e>d;d++)b[d].addEventListener(c.current.key,function(b){return function(c){b.call(a,c)}}(c.current.value))}(a.queryAll(c.current.key),new e(c.current.value))}return Object.defineProperties(a,{}),{constructor:function(a,b,e,g,h,i){a=c.spread(arguments),b="function"==c.typeof(a[a.length-1])?a.pop():null,e=f.isImplementedBy(a[a.length-1])?a.pop():a.length>1&&-1!="string, object".indexOf(c.typeof(a[a.length-1]))?new this.Model(a.pop()):new this.Model,g="string"==c.typeof(a[a.length-1])?{template:a.pop()}:"object"==c.typeof(a[a.length-1])?a.pop():{},h="string"==c.typeof(g.template)?g.template:"",i=new this.Template(h).parse(this),Object.defineProperties(this,{_template:{value:h},_dict:{value:g},_model:{value:e},_vars:{value:i.vars},_fragment:{value:i.tree}}),"object"==c.typeof(this._DOMEvents)&&d(this,this._DOMEvents),"object"==c.typeof(g.events)&&d(this,g.events)},root:{enumerable:!0,value:function(a){return a=this.queryAll("root"),a.length>1?a:a[0]}},query:{enumerable:!0,value:function(a){return this._vars.hasOwnProperty(a)?this._vars[a][0]:null}},queryAll:{enumerable:!0,value:function(a){return this._vars.hasOwnProperty(a)?[].concat(this._vars[a]):[]}},clone:{enumerable:!0,value:function(){return new this.constructor(this._dict,this.model)}},model:{enumerable:!0,get:function(){return this._model}},template:{enumerable:!0,get:function(){return this._template}},Model:{enumerable:!0,get:function(){return this._Model||f}},Template:{enumerable:!0,get:function(){return this._Template||b.exports.ZenParser}}}})}()},{"./Iterator":6,"./Model":7,"./class":18,"./utils":21}],17:[function(a,b){void function(){"use strict";var c=(a("./utils"),a("./class").class),d=a("./Model").Model;b.exports.WebStore=c(d,function(){return{constructor:function(){}}})}()},{"./Model":7,"./class":18,"./utils":21}],18:[function(a,b){void function(a){"use strict";b.exports.class=function(c,d,e,f){for(c=a.spread(arguments),d=Object.create(null),f=Object.create({}),c[c.length-1]=function g(b,c){if("function"==a.typeof(b))return g(b.call(null,d));b.constructor=b.hasOwnProperty("constructor")?b.constructor:function(){},e="function"!=a.typeof(b.constructor)||a.native(b.constructor)?"function"!=a.typeof(b.constructor.value)||a.native(b.constructor.value)?function(){}:b.constructor.value:b.constructor,delete b.constructor;try{return{prototype:Object.create(null,b)}}catch(f){for(c=Object.keys(b);c.length;)void function(a){b[a]=b[a].constructor==Object&&(b[a].hasOwnProperty("value")||b[a].hasOwnProperty("get")||b[a].hasOwnProperty("set"))?b[a]:{configurable:!0,enumerable:!0,writable:!0,value:b[a]}}(c.shift());return{prototype:Object.create(null,b)}}}(c[c.length-1]);c.length;)void function(a,b){try{b=Object.getOwnPropertyNames(a.prototype)}catch(c){b=[]}for(;b.length;)void function(a,b){Object.defineProperty(f,a,b)}(b[0],Object.getOwnPropertyDescriptor(a.prototype,b.shift()))}(c.shift());return Object.defineProperty(f,"constructor",{value:e,configurable:!0,enumerable:!0}),e.prototype=f,void function(a){for(;a.length;)Object.defineProperty(e,a[0],Object.getOwnPropertyDescriptor(d,a.shift()))}(Object.getOwnPropertyNames(d)),!e.hasOwnProperty("create")&&Object.defineProperty(e,"create",{enumerable:!0,value:function(b){function c(){return e.apply(this,b)}return b=a.spread(arguments),c.prototype=e.prototype,new c}}),!e.hasOwnProperty("extend")&&Object.defineProperty(e,"extend",{enumerable:!0,value:function(){return b.exports.class.apply(null,[e].concat(a.spread(arguments)))
}}),!e.hasOwnProperty("isImplementedBy")&&Object.defineProperty(e,"isImplementedBy",{enumerable:!0,value:function(a,b,c){if(!a)return!1;if(b=a&&"function"==typeof a.constructor?a.constructor.prototype:null,a instanceof e)return!0;for(c in e.prototype)if("constructor"!=c&&function(a,b,c){return c=a&&b?!1:!0,a&&(b.configurable?b.hasOwnProperty("value")&&typeof a.value!=typeof b.value&&(c=!0):(b.hasOwnProperty("value")&&a.value!==b.value&&(c=!0),b.hasOwnProperty("get")&&a.get!==b.get&&(c=!0),b.hasOwnProperty("set")&&a.set!==b.set&&(c=!0))),c}(Object.getOwnPropertyDescriptor(b,c),Object.getOwnPropertyDescriptor(e.prototype,c)))return!1;return!0}}),!e.hasOwnProperty("extend")&&Object.defineProperty(e,"implementsOn",{enumerable:!0,value:function(b,c,d){for(c="function"==a.typeof(b)?b.prototype:{},d=Object.getOwnPropertyNames(e.prototype);d.length;)Object.defineProperty(c,d[0],Object.getOwnPropertyDescriptor(e.prototype,d.shift()));e.apply(this,a.spread(arguments,1))}}),e},b.exports.singleton=function(a,c){a=b.exports.class.apply(null,arguments),c=b.exports.class.call(null,a,function(b,d){for(d in a)b[d]=a[d];return{constructor:function(){return c.instance?c.instance:(c.instance=this,a.apply(this,arguments))}}})}}(a("./utils"))},{"./utils":21}],19:[function(a,b){void function(){"use strict";var c=a("./Promise").Promise,d=a("./class").class,e=a("./EventTarget").Event,f=d(e,{constructor:function(){e.call(this,"domReady"),Object.defineProperties(this,{_nodes:{value:Object.create({},{documentElement:{enumerable:!0,value:document.documentElement},head:{enumerable:!0,value:document.head},body:{enumerable:!0,value:document.body},title:{enumerable:!0,value:function(a){return a?a:document.head.appendChild(document.createElement("title"))}(document.head.getElementsByTagName("title")[0])},viewport:{enumerable:!0,value:function(a){return a?a:(a=document.createElement("meta"),a.setAttribute("name","viewport"),a.setAttribute("content",""),document.head.appendChild(a))}(document.head.querySelector("meta[name=viewport]"))}})}})},nodes:{enumerable:!0,get:function(){return this._nodes||{}}}});b.exports=new c(function(a,b,c){function d(){c||(c=!0,setTimeout(a,4,new f))}function e(){return-1!="interactive,complete".indexOf(document.readyState)}e()?d():(window.addEventListener("DOMContentLoaded",d,!0),window.addEventListener("load",d,!0),document.addEventListener("readystatechange",e,!0))})}()},{"./EventTarget":5,"./Promise":9,"./class":18}],20:[function(a){void function(){"use strict";var b=a("./domReady"),c=function(a){"function"==typeof a&&b.then(a.bind(null))};Object.defineProperties(c,{version:{enumerable:!0,value:"korbutJS-ES5-0.0.1-1401450896049"},utils:{enumerable:!0,value:a("./utils")},"class":{enumerable:!0,value:a("./class").class},singleton:{enumerable:!0,value:a("./class").singleton},Iterator:{enumerable:!0,value:a("./Iterator").Iterator},EventTarget:{enumerable:!0,value:a("./EventTarget").EventTarget},Event:{enumerable:!0,value:a("./EventTarget").Event},CustomEvent:{enumerable:!0,value:a("./CustomEvent").CustomEvent},PointerEvent:{enumerable:!0,value:a("./PointerEvent").PointerEvent},Promise:{enumerable:!0,value:a("./Promise").Promise},Router:{enumerable:!0,value:a("./Router").Router},Route:{enumerable:!0,value:a("./Router").Route},Service:{enumerable:!0,value:a("./Service").Service},View:{enumerable:!0,value:a("./View").View},ZenParser:{enumerable:!0,value:a("./View").ZenParser},Stylesheet:{enumerable:!0,value:a("./Stylesheet").Stylesheet},Transition:{enumerable:!0,value:a("./Transition").Transition},Animation:{enumerable:!0,value:a("./Animation").Animation},ClientRect:{enumerable:!0,value:a("./ClientRect").ClientRect},Model:{enumerable:!0,value:a("./Model").Model},Collection:{enumerable:!0,value:a("./Model").Collection},Cookie:{enumerable:!0,value:a("./Cookie").Cookie},WebStore:{enumerable:!0,value:a("./WebStore").WebStore},UID:{enumerable:!0,value:a("./UID").UID},Serializer:{enumerable:!0,value:a("./Serializer").Serializer}}),window.korbut=c}()},{"./Animation":1,"./ClientRect":2,"./Cookie":3,"./CustomEvent":4,"./EventTarget":5,"./Iterator":6,"./Model":7,"./PointerEvent":8,"./Promise":9,"./Router":10,"./Serializer":11,"./Service":12,"./Stylesheet":13,"./Transition":14,"./UID":15,"./View":16,"./WebStore":17,"./class":18,"./domReady":19,"./utils":21}],21:[function(a,b){void function(){"use strict";b.exports.native=function(a){return function(b){try{return"function"==typeof b?!!b.toString().match(a):!1}catch(c){return null}}}(/\s*\[native code\]\s*/i),b.exports.spread=function(a){return function(b,c){return a.call(b,c)}}(Array.prototype.slice),b.exports.typeof=function(a){return function(b,c){return Array.isArray(b)?"array":(c=typeof b,"object"==c?a.call(b).slice(8,-1).toLowerCase():c)}}(Object.prototype.toString),b.exports.invoke=function(a,c,d){switch(a="function"==typeof a?a:function(){throw new TypeError("korbut.utils.invoke - function expected as argument 0")}(),c=arguments[1]||null,d=3==arguments.length&&Array.isArray(d)?d:b.exports.spread(arguments,2),d.length){case 0:return Function.prototype.call.call(a,c);case 1:return Function.prototype.call.call(a,c,d[0]);case 2:return Function.prototype.call.call(a,c,d[0],d[1]);case 3:return Function.prototype.call.call(a,c,d[0],d[1],d[2]);default:return Function.prototype.apply.call(a,c,d)}}}()},{}]},{},[20]);