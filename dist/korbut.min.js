/* Copyright Â©2014 Benjamin Moulin <hello@grid23.net>
   This work is free. You can redistribute it and/or modify it under the 
   terms of the Do What The Fuck You Want To Public License, Version 2, 
   as published by Sam Hocevar. See the COPYING file for more details. 
*/

!function a(b,c,d){function e(f,h){var i,j;if(!c[f]){if(!b[f]){if(i="function"==typeof require&&require,!h&&i)return i(f,!0);if(g)return g(f,!0);throw new Error("Cannot find module '"+f+"'")}j=c[f]={exports:{}},b[f][0].call(j.exports,function(a){var c=b[f][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[f].exports}var f,g="function"==typeof require&&require;for(f=0;f<d.length;f++)e(d[f]);return e}({1:[function(a,b){void function(a,c){"use strict";b.exports.Event=c(function(){return{constructor:function(b,c){b="string"==a.typeof(b)?b:function(){throw new Error("Event.type")}(),c=function(b){return!b.length||1==b.length&&-1!="undefined, null".indexOf(a.typeof(b[0]))?null:1==b.length&&b[0].constructor===Object&&b[0].hasOwnProperty("detail")?b[0].detail:1==b.length?b[0]:b}(a.spread(arguments,1)),Object.defineProperties(this,{_type:{configurable:!0,value:b},_detail:{configurable:!0,value:c},_timestamp:{configurable:!0,value:+new Date}})},initEvent:{value:function(){return this.constructor.apply(this,arguments)}},type:{enumerable:!0,get:function(){return this._type}},timestamp:{enumerable:!0,get:function(){return this._timestamp||0}},detail:{enumerable:!0,get:function(){return this._detail}}}})}(a("./utils"),a("./class").class)},{"./class":5,"./utils":7}],2:[function(a,b){void function(a,c,d){"use strict";b.exports.EventTarget=c(function(b){return Object.defineProperties(b,{isEventListener:{value:function(a){return a&&("function"==typeof a||"function"==typeof a.handleEvent)}}}),{addEventListener:{enumerable:!0,value:function(c,d,e){return!this._events&&Object.defineProperty(this,"_events",{value:Object.create(null)}),1==arguments.length&&arguments[0].constructor===Object?function(a,b,c){for(c in b)b.hasOwnProperty(c)&&a.addEventListener(c,b[c])}(this,arguments[0]):(c="string"==a.typeof(c)?c:null,d=b.isEventListener(d)?d:null,e=this._events[c],c&&d?(Array.isArray(e)?e.push(d):e&&e!==Object.prototype[c]?b.isEventListener(e)&&(this._events[c]=[e,d]):this._events[c]=d,1):0)}},removeEventListener:{enumerable:!0,value:function(c,d,e){return!this._events&&Object.defineProperty(this,"_events",{value:[]})._events,1==arguments.length&&arguments[0].constructor===Object?function(a,b,c){for(c in b)b.hasOwnProperty(c)&&a.removeEventListener(c,b[c])}(this,arguments[0]):(c="string"==a.typeof(c)?c:null,d=b.isEventListener(c)||"*"==c?c:null,e=this._events[c],c&&d&&e?e===d?(delete this._events[c],1):Array.isArray(e)?function(a,b,f,g){if("*"===d)return g=e.length,delete a._events[c],g;for(g=0;f=b.indexOf(d)>-1;)b.splice(f,1),g++;return a._events[c]=b,0==a._events[c].length&&delete a._events[c],g}(this,[].concat(e)):void 0:0)}},events:{enumerable:!0,get:function(){return Object.create(this._events||{})}},dispatchEvent:{enumerable:!0,value:function(a,b,c){if(a=d.isImplementedBy(a)?a:d.create.apply(null,arguments),b=(this._events||{})[a.type],c=0,"error"==a.type&&!b)throw d.isImplementedBy(a.detail)?a.detail:new Error;return b&&("function"==typeof b?(b.call(null,a),c++):Array.isArray(b)?void function(b){for(;b.length;)"function"==typeof b[i]?(b[i].call(null,a),c++):"function"==typeof b.handleEvent&&(b[i].call(b,a),c++)}([].concat(b)):"function"==typeof b.handleEvent&&(b.call(b,a),c++)),c}}}})}(a("./utils"),a("./class").class,a("./Event").Event)},{"./Event":1,"./class":5,"./utils":7}],3:[function(a,b){void function(a){"use strict";b.exports.Iterator=a(function(a){return Object.defineProperties(a,{iterate:{enumerable:!0,value:function(a,b,c,d,e,f){a=a||Object.create(null);try{return Object.keys(a)}catch(g){if(b=[],"[object String]"==Object.prototype.toString.call(a))for(c=0,d=a.length;d>c;c++)e=a.charCodeAt(c),f=a.charCodeAt(d-1>c?c+1:""),b.push(e>=55296&&56319>=e&&f>=56320&&57343>=f?a[c]+a[++c]:a[c]);return b}}}}),{constructor:function(b,c,d,e,f){for(c=!!arguments[1]||"[object String]"==Object.prototype.toString.call(arguments[0]),d=a.iterate(b),e=0,f=d.length,Object.defineProperties(this,{_pointer:{writable:!0,value:-1},_range:{value:[]}});f>e;e++)this._range[e]=c?[d[e]]:[d[e],arguments[0][d[e]]]},next:{enumerable:!0,value:function(a){return a=++this._pointer,a>=(this._range=this._range||[]).length?{index:null,value:null,done:!0}:{index:a,value:this._range[a][this._range[a].length-1],done:!1}}}}})}(a("./class").class)},{"./class":5}],4:[function(a,b){void function(a,c){"use strict";b.exports.Promise=c(function(a,c){return Object.defineProperties(a,{all:{enumerable:!0,value:function(){}},cast:{enumerable:!0,value:function(){}},race:{enumerable:!0,value:function(){}},reject:{enumerable:!0,value:function(a){return new b.exports.Promise(function(b,c){c(a)})}},resolve:{enumerable:!0,value:function(a){return new b.exports.Promise(function(b){b(a)})}}}),c=+new Date,{constructor:function(a){function b(a,e){for(b=d=function(){},Object.defineProperties(this,{RESOLVED:{value:c},YIELD:{get:function(){return a}}}),e=Array.isArray(this._onresolve)?[].concat(this._onresolve):[];e.length;)e.shift().call(null,a)}function d(a,e){for(b=d=function(){},Object.defineProperties(this,{REJECTED:{value:c},YIELD:{get:function(){return a}}}),e=Array.isArray(this._onreject)?[].concat(this._onreject):[];e.length;)e.shift().call(null,a)}if("function"!=typeof a)throw new Error;a(b.bind(this),d.bind(this))},then:{enumerable:!0,value:function(a,d){return function(c,e,f){return e||f?e?new b.exports.Promise(function(b,d,e){try{e="function"==typeof a?a(c.YIELD):null}catch(f){return void d(f)}e&&"function"==typeof e.then?e.then(function(a){b(a)},function(a){d(a)}):b(e)}):f?new b.exports.Promise(function(a,b,e){try{e="function"==typeof d?d(c.YIELD):null}catch(f){return void b(f)}e&&"function"==typeof e.then?e.then(function(b){a(b)},function(a){b(a)}):a(e)}):void 0:new b.exports.Promise(function(b,e){!Array.isArray(c._onresolve)&&Object.defineProperty(c,"_onresolve",{value:[]}),!Array.isArray(c._onreject)&&Object.defineProperty(c,"_onreject",{value:[]}),c._onresolve.push(function(c,d){try{d=a(c)}catch(f){return void e(f)}d&&"function"==typeof d.then?d.then(function(a){b(a)},function(a){e(a)}):b(d)}),c._onreject.push(function(a,c){try{c=d(a)}catch(f){return void e(f)}c&&"function"==typeof c.then?c.then(function(a){b(a)},function(a){e(a)}):b(c)})})}(this,this.RESOLVED==c,this.REJECTED==c)}},"catch":{enumerable:!0,value:function(a){return function(c){return new b.exports.Promise(function(b,d){c.then(b,function(b){return d(b),a(b)})})}(this)}}}})}(a("./utils"),a("./class").class)},{"./class":5,"./utils":7}],5:[function(a,b){void function(a){"use strict";b.exports.class=function(c,d,e,f){for(c=a.spread(arguments),d=Object.create(null),f=Object.create({}),c[c.length-1]=function g(b,c){if("function"==a.typeof(b))return g(b.call(null,d));b.constructor=b.hasOwnProperty("constructor")?b.constructor:function(){},e="function"!=a.typeof(b.constructor)||a.native(b.constructor)?"function"!=a.typeof(b.constructor.value)||a.native(b.constructor.value)?function(){}:b.constructor.value:b.constructor,delete b.constructor;try{return{prototype:Object.create(null,b)}}catch(f){for(c=Object.keys(b);c.length;)void function(a){b[a]=b[a].constructor==Object&&(b[a].hasOwnProperty("value")||b[a].hasOwnProperty("get")||b[a].hasOwnProperty("set"))?b[a]:{configurable:!0,enumerable:!0,writable:!0,value:b[a]}}(c.shift());return{prototype:Object.create(null,b)}}}(c[c.length-1]);c.length;)void function(a,b){try{b=Object.getOwnPropertyNames(a.prototype)}catch(c){b=[]}for(;b.length;)void function(a,b){Object.defineProperty(f,a,b)}(b[0],Object.getOwnPropertyDescriptor(a.prototype,b.shift()))}(c.shift());return Object.defineProperty(f,"constructor",{configurable:!0,value:e}),e.prototype=f,void function(a){for(;a.length;)Object.defineProperty(e,a[0],Object.getOwnPropertyDescriptor(d,a.shift()))}(Object.getOwnPropertyNames(d)),!e.hasOwnProperty("create")&&Object.defineProperty(e,"create",{enumerable:!0,value:function(b){function c(){return e.apply(this,b)}return b=a.spread(arguments),c.prototype=e.prototype,new c}}),!e.hasOwnProperty("extend")&&Object.defineProperty(e,"extend",{enumerable:!0,value:function(){return b.exports.class.apply(null,[e].concat(a.spread(arguments)))}}),!e.hasOwnProperty("isImplementedBy")&&Object.defineProperty(e,"isImplementedBy",{enumerable:!0,value:function(b,c,d){if(c="function"==a.typeof(b)?b.prototype:Object.create(null),!b)return!1;if(b instanceof e)return!0;for(d in e.prototype)if("constructor"!=d&&function(a,b){return a&&b&&a==b?!1:!0}(Object.getOwnPropertyDescriptor(c,d),Object.getOwnPropertyDescriptor(e.prototype,d)))return!1;return!0}}),!e.hasOwnProperty("extend")&&Object.defineProperty(e,"implementsOn",{enumerable:!0,value:function(b,c,d){for(c="function"==!a.typeof(b)?b.prototype:{},d=Object.getOwnPropertyNames(e.prototype);d.length;)Object.defineProperty(c,d[0],Object.getOwnPropertyDescriptor(e.prototype,d.shift()));e.apply(this,a.spread(arguments,1))}}),e},b.exports.singleton=function(a,c){a=b.exports.class.apply(null,arguments),c=b.exports.class.call(null,a,function(b,d){for(d in a)b[d]=a[d];return{constructor:function(){return c.instance?c.instance:(c.instance=this,a.apply(this,arguments))}}})}}(a("./utils"))},{"./utils":7}],6:[function(a){void function(b){"use strict";b.class=a("./class").class,b.singleton=a("./class").singleton,b.Iterator=a("./Iterator").Iterator,b.EventTarget=a("./EventTarget").EventTarget,b.Event=a("./Event").Event,b.Promise=a("./Promise").Promise,window.k=b}({version:"korbutJS-ES5-0.0.0-1395644688040"})},{"./Event":1,"./EventTarget":2,"./Iterator":3,"./Promise":4,"./class":5}],7:[function(a,b){void function(){"use strict";b.exports.native=function(a){return function(b){try{return"function"==typeof b?!!b.toString().match(a):!1}catch(c){return null}}}(/\s*\[native code\]\s*/i),b.exports.spread=function(a){return function(b,c){return a.call(b,c)}}(Array.prototype.slice),b.exports.typeof=function(a){return function(b,c){return c=typeof b,"object"==c?a.call(b).slice(8,-1).toLowerCase():c}}(Object.prototype.toString)}()},{}]},{},[6]);